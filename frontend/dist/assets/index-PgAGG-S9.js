import{h as S,d as n,x as T,_ as $,W as l,V as B,a3 as z,a4 as I,m as e,a0 as p,X as d,Y as N}from"./vue-DQIp4sjX.js";import{D as _}from"./data-sources-BUU_4ipN.js";import{D as R}from"./DataSource-CDPs76xn.js";import{V as j,a as U,b as g,c as b,d as E}from"./VDataTable-DvIcUScc.js";import{V as v,a as x,b as F}from"./VCard-Qx0q1Gfz.js";import{e as m,f as M,c as O,_ as W}from"./index-I9y5uwlj.js";import{V as X}from"./VTextField-CioUwnLL.js";import{V as Y}from"./VDialog-DsLKFviM.js";import"./request-B22OhU3A.js";import"./vuetify-BfLt-5w1.js";import"./VForm-DAuIbUed.js";import"./VSelectionControl-HCumd4nr.js";const q={class:"d-flex justify-center gap-2"},A=S({__name:"index",setup(G){z(),I();const c=n(""),o=n([]),i=n(!1),u=n(!1),r=n(null),C=n([{title:"编号",value:"no",width:"10%"},{title:"名称",value:"name",width:"15%"},{title:"地址",value:"url",width:"40%"},{title:"用户名",value:"username",width:"15%"},{title:"操作",value:"actions",sortable:!1,width:"20%",align:"center"}]),y=()=>{r.value=null,u.value=!0},w=t=>{r.value={...t},u.value=!0},f=()=>{u.value=!1,r.value=null},h=()=>{V(),f()},D=t=>{const a=o.value.indexOf(t);a>-1&&o.value.splice(a,1),i.value=!0,_.remove(t.no).then(s=>{s.code===200?alert("删除成功"):(alert(`删除失败:
${s.message}`),o.value.splice(a,0,t))}).catch(s=>{alert(`删除失败: ${s.message}`),o.value.splice(a,0,t)}).finally(()=>{i.value=!1})},V=()=>{i.value=!0,_.list().then(t=>{o.value=t}).catch(t=>{console.error("Error fetching data sources:",t),alert(`加载数据失败: ${t.message}`)}).finally(()=>{i.value=!1})};return T(()=>{V()}),(t,a)=>(B(),$(j,{fluid:"",class:"pa-4"},{default:l(()=>[e(v,{flat:"",class:"mb-6"},{default:l(()=>[e(x,null,{default:l(()=>[e(U,{dense:"",align:"center",class:"mb-2"},{default:l(()=>[e(g,{cols:"auto"},{default:l(()=>[...a[2]||(a[2]=[p("h3",{class:"text-subtitle-1 font-weight-bold"},"数据源",-1)])]),_:1}),e(b),e(g,{cols:"auto"},{default:l(()=>[e(m,{class:"text-none",color:"primary","prepend-icon":"mdi-plus",rounded:"md",size:"small",variant:"flat",onClick:y},{default:l(()=>[...a[3]||(a[3]=[d(" 新增 ",-1)])]),_:1})]),_:1})]),_:1}),a[4]||(a[4]=p("div",{class:"text-body-2 text-medium-emphasis mb-4 w-100 w-md-75"}," 以下为当前的数据源列表，您可以查看、编辑或删除数据源。 ",-1))]),_:1})]),_:1}),e(v,{flat:""},{default:l(()=>[e(x,null,{default:l(()=>[e(E,{headers:C.value,search:c.value,items:o.value,density:"compact",class:"elevation-1","items-per-page":10,loading:i.value,"item-value":"no"},{top:l(()=>[e(M,{density:"compact",class:"mb-2"},{default:l(()=>[e(b),e(X,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=s=>c.value=s),label:"搜索",density:"compact","single-line":"","hide-details":"",variant:"outlined",clearable:"","prepend-inner-icon":"mdi-magnify",style:{"max-width":"300px"}},null,8,["modelValue"])]),_:1})]),"item.actions":l(({item:s})=>[p("div",q,[e(m,{class:"text-none",color:"primary",size:"small",variant:"text",onClick:k=>w(s)},{default:l(()=>[...a[5]||(a[5]=[d(" 编辑 ",-1)])]),_:1},8,["onClick"]),e(m,{class:"text-none",color:"primary",size:"small",variant:"text",onClick:k=>D(s)},{default:l(()=>[...a[6]||(a[6]=[d(" 删除 ",-1)])]),_:1},8,["onClick"])])]),_:1},8,["headers","search","items","loading"])]),_:1})]),_:1}),e(Y,{modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=s=>u.value=s),"max-width":"1200px",persistent:""},{default:l(()=>[e(v,null,{default:l(()=>[e(F,{class:"d-flex justify-space-between pt-4 px-4"},{default:l(()=>[d(N(r.value?"编辑数据源":"新增数据源")+" ",1),e(m,{icon:"",onClick:f,variant:"text"},{default:l(()=>[e(O,null,{default:l(()=>[...a[7]||(a[7]=[d("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(R,{"data-source":r.value,onSaved:h,onCancel:f},null,8,["data-source"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),oe=W(A,[["__scopeId","data-v-968be49e"]]);export{oe as default};
