import{R as J}from"./request-B22OhU3A.js";import{d as k,a as r,m as n,F as Z,w as K,A as Q,J as p,n as ee,h as te,x as ae,_ as W,W as I,V as R,X as ne,a6 as le}from"./vue-DQIp4sjX.js";import{V as ie,b as re,a as ue}from"./VCard-Qx0q1Gfz.js";import{p as P,g as X,D as j,W as E,u as F}from"./vuetify-BfLt-5w1.js";import{g as oe}from"./index-I9y5uwlj.js";const se=k("/statistic");class ce{byDate(){return J.get(`${se.value}/byDate`)}}const me=new ce,O=P({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:Boolean,width:{type:[Number,String],default:300}},"Line"),G=P({autoLineWidth:Boolean,...O()},"VBarline"),_=X()({name:"VBarline",props:G(),setup(e,u){let{slots:l}=u;const m=j(),a=r(()=>e.id||`barline-${m}`),c=r(()=>Number(e.autoDrawDuration)||500),o=r(()=>!!(e.showLabels||e.labels.length>0||l?.label)),d=r(()=>parseFloat(e.lineWidth)||4),f=r(()=>Math.max(e.modelValue.length*d.value,Number(e.width))),b=r(()=>({minX:0,maxX:f.value,minY:0,maxY:parseInt(e.height,10)})),w=r(()=>e.modelValue.map(s=>E(s,e.itemValue,s)));function D(s,t){const{minX:i,maxX:h,minY:y,maxY:g}=t,v=s.length;let B=e.max!=null?Number(e.max):Math.max(...s),V=e.min!=null?Number(e.min):Math.min(...s);V>0&&e.min==null&&(V=0),B<0&&e.max==null&&(B=0);const C=h/v,M=(g-y)/(B-V||1),T=g-Math.abs(V*M);return s.map((S,z)=>{const Y=Math.abs(M*S);return{x:i+z*C,y:T-Y+ +(S<0)*Y,height:Y,value:S}})}const N=r(()=>{const s=[],t=D(w.value,b.value),i=t.length;for(let h=0;s.length<i;h++){const y=t[h];let g=e.labels[h];g||(g=typeof y=="object"?y.value:y),s.push({x:y.x,value:String(g)})}return s}),x=r(()=>D(w.value,b.value)),$=r(()=>(Math.abs(x.value[0].x-x.value[1].x)-d.value)/2);F(()=>{const s=e.gradient.slice().length?e.gradient.slice().reverse():[""];return n("svg",{display:"block"},[n("defs",null,[n("linearGradient",{id:a.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[s.map((t,i)=>n("stop",{offset:i/Math.max(s.length-1,1),"stop-color":t||"currentColor"},null))])]),n("clipPath",{id:`${a.value}-clip`},[x.value.map(t=>n("rect",{x:t.x+$.value,y:t.y,width:d.value,height:t.height,rx:typeof e.smooth=="number"?e.smooth:e.smooth?2:0,ry:typeof e.smooth=="number"?e.smooth:e.smooth?2:0},[e.autoDraw&&n(Z,null,[n("animate",{attributeName:"y",from:t.y+t.height,to:t.y,dur:`${c.value}ms`,fill:"freeze"},null),n("animate",{attributeName:"height",from:"0",to:t.height,dur:`${c.value}ms`,fill:"freeze"},null)])]))]),o.value&&n("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[N.value.map((t,i)=>n("text",{x:t.x+$.value+d.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[l.label?.({index:i,value:t.value})??t.value]))]),n("g",{"clip-path":`url(#${a.value}-clip)`,fill:`url(#${a.value})`},[n("rect",{x:0,y:0,width:Math.max(e.modelValue.length*d.value,Number(e.width)),height:e.height},null)])])})}});function de(e,u){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(e.length===0)return"";const a=e.shift(),c=e[e.length-1];return(l?`M${a.x} ${m-a.x+2} L${a.x} ${a.y}`:`M${a.x} ${a.y}`)+e.map((o,d)=>{const f=e[d+1],b=e[d-1]||a,w=f&&he(f,o,b);if(!f||w)return`L${o.x} ${o.y}`;const D=Math.min(A(b,o),A(f,o)),x=D/2<u?D/2:u,$=U(b,o,x),s=U(f,o,x);return`L${$.x} ${$.y}S${o.x} ${o.y} ${s.x} ${s.y}`}).join("")+(l?`L${c.x} ${m-a.x+2} Z`:"")}function L(e){return parseInt(e,10)}function he(e,u,l){return L(e.x+l.x)===L(2*u.x)&&L(e.y+l.y)===L(2*u.y)}function A(e,u){return Math.sqrt(Math.pow(u.x-e.x,2)+Math.pow(u.y-e.y,2))}function U(e,u,l){const m={x:e.x-u.x,y:e.y-u.y},a=Math.sqrt(m.x*m.x+m.y*m.y),c={x:m.x/a,y:m.y/a};return{x:u.x+c.x*l,y:u.y+c.y*l}}const H=P({fill:Boolean,...O()},"VTrendline"),q=X()({name:"VTrendline",props:H(),setup(e,u){let{slots:l}=u;const m=j(),a=r(()=>e.id||`trendline-${m}`),c=r(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),o=k(0),d=k(null);function f(t,i){const{minX:h,maxX:y,minY:g,maxY:v}=i,B=t.length,V=e.max!=null?Number(e.max):Math.max(...t),C=e.min!=null?Number(e.min):Math.min(...t),M=(y-h)/(B-1),T=(v-g)/(V-C||1);return t.map((S,z)=>({x:h+z*M,y:v-(S-C)*T,value:S}))}const b=r(()=>!!(e.showLabels||e.labels.length>0||l?.label)),w=r(()=>parseFloat(e.lineWidth)||4),D=r(()=>Number(e.width)),N=r(()=>{const t=Number(e.padding);return{minX:t,maxX:D.value-t,minY:t,maxY:parseInt(e.height,10)-t}}),x=r(()=>e.modelValue.map(t=>E(t,e.itemValue,t))),$=r(()=>{const t=[],i=f(x.value,N.value),h=i.length;for(let y=0;t.length<h;y++){const g=i[y];let v=e.labels[y];v||(v=typeof g=="object"?g.value:g),t.push({x:g.x,value:String(v)})}return t});K(()=>e.modelValue,async()=>{if(await Q(),!e.autoDraw||!d.value)return;const t=d.value,i=t.getTotalLength();e.fill?(t.style.transformOrigin="bottom center",t.style.transition="none",t.style.transform="scaleY(0)",t.getBoundingClientRect(),t.style.transition=`transform ${c.value}ms ${e.autoDrawEasing}`,t.style.transform="scaleY(1)"):(t.style.strokeDasharray=`${i}`,t.style.strokeDashoffset=`${i}`,t.getBoundingClientRect(),t.style.transition=`stroke-dashoffset ${c.value}ms ${e.autoDrawEasing}`,t.style.strokeDashoffset="0"),o.value=i},{immediate:!0});function s(t){return de(f(x.value,N.value),e.smooth?8:Number(e.smooth),t,parseInt(e.height,10))}F(()=>{const t=e.gradient.slice().length?e.gradient.slice().reverse():[""];return n("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[n("defs",null,[n("linearGradient",{id:a.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[t.map((i,h)=>n("stop",{offset:h/Math.max(t.length-1,1),"stop-color":i||"currentColor"},null))])]),b.value&&n("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[$.value.map((i,h)=>n("text",{x:i.x+w.value/2+w.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[l.label?.({index:h,value:i.value})??i.value]))]),n("path",{ref:d,d:s(e.fill),fill:e.fill?`url(#${a.value})`:"none",stroke:e.fill?"none":`url(#${a.value})`},null),e.fill&&n("path",{d:s(!1),fill:"none",stroke:e.color??e.gradient?.[0]},null)])})}}),ge=P({type:{type:String,default:"trend"},...G(),...H()},"VSparkline"),fe=X()({name:"VSparkline",props:ge(),setup(e,u){let{slots:l}=u;const{textColorClasses:m,textColorStyles:a}=oe(p(e,"color")),c=r(()=>!!(e.showLabels||e.labels.length>0||l?.label)),o=r(()=>{let d=parseInt(e.height,10);return c.value&&(d+=parseInt(e.labelSize,10)*1.5),d});F(()=>{const d=e.type==="trend"?q:_,f=e.type==="trend"?q.filterProps(e):_.filterProps(e);return n(d,ee({key:e.type,class:m.value,style:a.value,viewBox:`0 0 ${e.width} ${parseInt(o.value,10)}`},f),l)})}}),ye="cubic-bezier(0.4, 0, 0.2, 1)",$e=te({__name:"home",setup(e){const u=["#1867C0","#5CBBF6"];k("top"),k(!1);const l=k([]),m=r(()=>l.value.map(c=>c.num)),a=r(()=>l.value.map(c=>{const o=new Date(c.d);return`${o.getMonth()+1}/${o.getDate()}`}));return ae(async()=>{const c=await me.byDate();l.value=c}),(c,o)=>(R(),W(ie,null,{default:I(()=>[n(re,{class:"text-center"},{default:I(()=>[...o[0]||(o[0]=[ne("日访问量统计",-1)])]),_:1}),n(ue,null,{default:I(()=>[l.value.length>0?(R(),W(fe,{key:0,"model-value":m.value,labels:a.value,gradient:u,smooth:10,padding:8,"line-width":1,"auto-line-width":!1,"stroke-linecap":"round",type:"trend","auto-draw":!0,"auto-draw-duration":2e3,"auto-draw-easing":ye,"show-labels":!0,"label-size":"5"},null,8,["model-value","labels"])):le("",!0)]),_:1})]),_:1}))}});export{$e as default};
